<div class="filter-row">
  <mat-form-field>
    <mat-label>Status</mat-label>
    <mat-select [(value)]="statusFilter" (selectionChange)="applyFilter($event.value)">
      <mat-option value="">All</mat-option>
      <mat-option value="PENDING">Pending</mat-option>
      <mat-option value="COMPLETED">Completed</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<app-task-form
  *ngIf="selectedTask"
  [task]="selectedTask"
  (save)="saveTask($event)"
></app-task-form>

<table mat-table [dataSource]="tasks" class="mat-elevation-z8 full-width-table">

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef> Title </th>
    <td mat-cell *matCellDef="let task"> {{ task.title }} </td>
  </ng-container>

  <ng-container matColumnDef="dueDate">
    <th mat-header-cell *matHeaderCellDef> Due Date </th>
    <td mat-cell *matCellDef="let task"> {{ task.dueDate }} </td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef> Status </th>
    <td mat-cell *matCellDef="let task"> {{ task.status }} </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let task">
      <button mat-button (click)="editTask(task)">Edit</button>
      <button mat-button color="warn" (click)="deleteTask(task.id!)">Delete</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="['title', 'dueDate', 'status', 'actions']"></tr>
  <tr mat-row *matRowDef="let row; columns: ['title', 'dueDate', 'status', 'actions'];"></tr>
</table>
